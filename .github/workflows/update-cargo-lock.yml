name: Update Cargo.lock Pull Request
on:
  schedule:
    - cron: '0 6 * * TUE,WED,THU,FRI,SAT,SUN' # every day except Monday (reserved for dependabot)
  workflow_dispatch: # allows to manually trigger the workflow as well

jobs:
  update-cargo-lock-file:
    name: Update Cargo.lock file
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions-rs/toolchain@v1
        with:
          toolchain: stable
      - name: cargo update
        run: cargo update
      - name: pull-request
        uses: peter-evans/create-pull-request@v6
        with:
          branch: "create-pull-request/update-cargo-lock"
          title: "Cargo.lock update"
          commit-message: |
            Update Cargo.lock

            This commit has been automatically generated by
            update-cargo-lock.yml workflow.
          labels: dependencies,automated
          delete-branch: true
